// Copyright 2022 Cole Smith <cole@boadsource.xyz>
// SPDX-License-Identifier: GPL-2.0-or-later
// qmk compile -kb boardsource/lulu/rp2040 -km nhamata
// make sure to switch to boot mode
// then plug in the MASTER SIDE FIRST
// load the UF2
// switch to default mode
// you only need to flash the master ok?
#define DHE_LABELS
#define ALL_COMBO_DEFS
#define NAV_ORTHO_COMBO_DEFS
#define ALL_COMBOS
#include QMK_KEYBOARD_H  
#include "combo.h"

enum layers {
    _COLEMAK_DHE,
    _LAYER_1,
    _LAYER_2,
    _QWERTY
};

#define RAISE MO(_RAISE)
#define LOWER MO(_LOWER)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
 
/* COLEMAK_DHE
 * ,-----------------------------------------.                    ,-----------------------------------------.
 * | ESC  |   1  |   2  |   3  |   4  |   5  |                    |   6  |   7  |   8  |   9  |   0  |  `   |
 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
 * | Tab  |   Q  |   W  |   F  |   P  |   B  |                    |   Y  |   J  |   U  |   Y  |   P  |  -   |
 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
 * |LCTRL |   A  |   R  |   S  |   T  |   G  |-------.    ,-------|   M  |   N  |   L  |   I  |   O  |  '   |
 * |------+------+------+------+------+------|  ESC  |    | CAPS  |------+------+------+------+------+------|
 * |LShift|   Z  |   X  |   C  |   D  |   V  |-------|    |-------|   K  |   H  |   ,  |   .  |   /  |RShift|
 * `-----------------------------------------/       /     \      \-----------------------------------------'
 *                   | LAlt | LGUI |Space | /   L1  /       \  L2  \  |   E  |BackSP| RGUI |
 *                   |      |      |      |/       /         \      \ |      |      |      |
 *                   `----------------------------'           '------''--------------------'
 */

 [_COLEMAK_DHE] = LAYOUT(
//,-----------------------------------------------------------------------------------------------.                                  ,-----------------------------------------------------------------------------------------------.
        KC_ESC,          KC_1,           KC_2,          KC_3,           KC_4,           KC_5,                                               KC_6,           KC_7,          KC_8,            KC_9,          KC_0,          KC_GRV,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
        KC_TAB,          KC_Q,           KC_W,          KC_F,           KC_P,           KC_B,                                               KC_Y,           KC_J,          KC_U,            KC_Y,          KC_P,          KC_MINS,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
       KC_LCTL,          KC_A,           KC_R,          KC_S,           KC_T,           KC_G,                                               KC_M,           KC_N,          KC_L,            KC_I,          KC_O,          KC_QUOT,
//|---------------+---------------+---------------+---------------+---------------+---------------|---------------|  |---------------|---------------+---------------+---------------+---------------+---------------+---------------|
       KC_LSFT,          KC_Z,      LALT_T(KC_X),   LGUI_T(KC_C),   LCTL_T(KC_D),       KC_V,          KC_ESC,            KC_CAPS,          KC_K,      RCTL_T(KC_H), RGUI_T(KC_COMMA), RALT_T(KC_DOT),    KC_SLSH,        KC_DOT,
//|---------------+---------------+---------------+---------------+---------------+---------------+---------------|  |---------------+---------------+---------------+---------------+---------------+---------------+---------------|
                                                       KC_LALT,        KC_LGUI,    LSFT_T(KC_SPC),      MO(1),              MO(2),     RSFT_T(KC_E),      KC_RALT,        KC_RGUI
                                                //`---------------------------------------------------------------'  `---------------------------------------------------------------'
),
/* LOWER
 * ,-----------------------------------------.                    ,-----------------------------------------.
 * |      |      |      |      |      |      |                    |      |      |      |      |      |      |
 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
 * |  F1  |  F2  |  F3  |  F4  |  F5  |  F6  |                    |  F7  |  F8  |  F9  | F10  | F11  | F12  |
 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
 * |   `  |   !  |   @  |   #  |   $  |   %  |-------.    ,-------|   ^  |   &  |   *  |   (  |   )  |   -  |
 * |------+------+------+------+------+------|   [   |    |    ]  |------+------+------+------+------+------|
 * |      |      |      |      |      |      |-------|    |-------|      |   _  |   +  |   {  |   }  |   |  |
 * `-----------------------------------------/       /     \      \-----------------------------------------'
 *                   | LAlt | LGUI |LOWER | /Space  /       \Enter \  |RAISE |BackSP| RGUI |
 *                   |      |      |      |/       /         \      \ |      |      |      |
 *                   `----------------------------'           '------''--------------------'
 */
[_LAYER_1] = LAYOUT(
//,-----------------------------------------------------------------------------------------------.                                  ,-----------------------------------------------------------------------------------------------.
       _______,         _______,       _______,        _______,        _______,        _______,                                           _______,        _______,        _______,        _______,        _______,        _______,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
       _______,          KC_F1,         KC_F2,          KC_F3,          KC_F4,          KC_F5,                                             KC_F8,          KC_F9,          KC_F10,         KC_F11,         KC_F12,        _______,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
       _______,          KC_6,           KC_4,          KC_2,           KC_0,           KC_F6,                                               KC_F7,         KC_1,           KC_3,           KC_5,           KC_7,         _______,
//|---------------+---------------+---------------+---------------+---------------+---------------|---------------|  |---------------|---------------+---------------+---------------+---------------+---------------+---------------|
       _______,         _______,       KC_LALT,        KC_LGUI,     LCTL_T(KC_8),      _______,        _______,           _______,        _______,     RCTL_T(KC_9),      KC_RGUI,        KC_RALT,        _______,        _______,
//|---------------+---------------+---------------+---------------+---------------+---------------+---------------|  |---------------+---------------+---------------+---------------+---------------+---------------+---------------|
                                                       _______,        _______,    LSFT_T(KC_SPC),      MO(1),              MO(2),     RSFT_T(KC_E),      _______,        _______
                                                //`---------------------------------------------------------------'  `---------------------------------------------------------------'
),
/* LOWER
 * ,-----------------------------------------.                    ,-----------------------------------------.
 * |      |      |      |      |      |      |                    |      |      |      |      |      |      |
 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
 * |  F1  |  F2  |  F3  |  F4  |  F5  |  F6  |                    |  F7  |  F8  |  F9  | F10  | F11  | F12  |
 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
 * |   `  |   !  |   @  |   #  |   $  |   %  |-------.    ,-------|   ^  |   &  |   *  |   (  |   )  |   -  |
 * |------+------+------+------+------+------|   [   |    |    ]  |------+------+------+------+------+------|
 * |      |      |      |      |      |      |-------|    |-------|      |   _  |   +  |   {  |   }  |   |  |
 * `-----------------------------------------/       /     \      \-----------------------------------------'
 *                   | LAlt | LGUI |LOWER | /Space  /       \Enter \  |RAISE |BackSP| RGUI |
 *                   |      |      |      |/       /         \      \ |      |      |      |
 *                   `----------------------------'           '------''--------------------'
 */
[_LAYER_2] = LAYOUT(
//,-----------------------------------------------------------------------------------------------.                                  ,-----------------------------------------------------------------------------------------------.
       _______,        _______,       _______,        _______,        _______,        _______,                                            _______,         _______,       _______,        _______,        _______,        _______,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
       _______,        _______,        KC_HOME,          KC_K,         KC_END,        RGB_SAD,                                            RGB_SAI,        KC_HOME,         KC_UP,          KC_END,        _______,        _______,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
       _______,        RGB_TOG,         KC_H,            KC_J,          KC_L,         RGB_VAD,                                            RGB_VAI,        KC_LEFT,         KC_DOWN,       KC_RIGHT,       RGB_MOD,        _______,
//|---------------+---------------+---------------+---------------+---------------+---------------|---------------|  |---------------|---------------+---------------+---------------+---------------+---------------+---------------|
       _______,        _______,        KC_LALT,         KC_LGUI,       KC_LCTL,       RGB_HUD,         _______,           _______,        RGB_HUI,        KC_RCTL,         KC_RGUI,       KC_RALT,        _______,        _______,
//|---------------+---------------+---------------+---------------+---------------+---------------+---------------|  |---------------+---------------+---------------+---------------+---------------+---------------+---------------|
                                                       _______,        _______,    LSFT_T(KC_SPC),      MO(1),              MO(2),     RSFT_T(KC_E),      _______,        _______
                                                //`---------------------------------------------------------------'  `---------------------------------------------------------------'
),
[_QWERTY] = LAYOUT(
//,-----------------------------------------------------------------------------------------------.                                  ,-----------------------------------------------------------------------------------------------.
       KC_ESC,           KC_1,           KC_2,          KC_3,           KC_4,           KC_5,                                               KC_6,           KC_7,           KC_8,          KC_9,           KC_0,          KC_GRV,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
       KC_TAB,           KC_Q,           KC_W,          KC_E,           KC_R,           KC_T,                                               KC_Y,           KC_U,           KC_I,          KC_O,           KC_P,          KC_MINS,
//|---------------+---------------+---------------+---------------+---------------+---------------|                                  |---------------+---------------+---------------+---------------+---------------+---------------|
       KC_LCTL,        RGB_TOG,          KC_H,          KC_J,           KC_L,         RGB_VAD,                                              KC_H,           KC_J,           KC_K,          KC_L,          KC_SCLN,        KC_QUOT,
//|---------------+---------------+---------------+---------------+---------------+---------------|---------------|  |---------------|---------------+---------------+---------------+---------------+---------------+---------------|
       KC_LSFT,         KC_Z,           KC_X,            KC_C,           KC_V,          KC_B,          _______,           _______,          KC_N,           KC_M,         KC_COMM,        KC_DOT,         KC_SLSH,        KC_RSFT,
//|---------------+---------------+---------------+---------------+---------------+---------------+---------------|  |---------------+---------------+---------------+---------------+---------------+---------------+---------------|
                                                       KC_LALT,        KC_LGUI,        KC_LCTL,        MO(1),              MO(2),          KC_RCTL,       KC_RGUI,        KC_RALT
                                                //`---------------------------------------------------------------'  `---------------------------------------------------------------'
)
};

layer_state_t layer_state_set_user(layer_state_t state) {
   return update_tri_layer_state(state, _LAYER_1, _LAYER_2,_QWERTY);
}
